<?php
/**
 * Malware Detection page template.
 *
 * @package    Kura_AI
 * @subpackage Kura_AI/admin/partials
 */

// If this file is called directly, abort.
if (!defined('WPINC')) {
    die;
}
?>

<div class="wrap" id="malware-detection-page">
    <h1><?php echo esc_html(get_admin_page_title()); ?></h1>

    <div class="malware-detection-container">
        <!-- Settings Section -->
        <div class="settings-section">
            <h3><?php _e('Scan Settings', 'kura-ai'); ?></h3>
            
            <!-- Enable/Disable Switch -->
            <div class="form-group">
                <label class="switch-label">
                    <input type="checkbox" id="enable-malware-detection" name="enable_malware_detection" checked>
                    <span class="slider round"></span>
                    <?php _e('Enable Malware Detection', 'kura-ai'); ?>
                </label>
            </div>

            <!-- AI Confidence Threshold -->
            <div class="confidence-slider">
                <label for="ai-confidence-threshold">
                    <?php _e('AI Confidence Threshold', 'kura-ai'); ?>
                    <span id="confidence-value">75%</span>
                </label>
                <input type="range" id="ai-confidence-threshold" name="ai_confidence_threshold"
                       min="0" max="100" value="75" step="5">
                <p class="description">
                    <?php _e('Adjust the confidence level required for AI to flag potential malware.', 'kura-ai'); ?>
                </p>
            </div>

            <!-- Scan Frequency -->
            <div class="form-group">
                <label for="scan-frequency"><?php _e('Automatic Scan Frequency', 'kura-ai'); ?></label>
                <select id="scan-frequency" name="scan_frequency" class="regular-text">
                    <option value="daily"><?php _e('Daily', 'kura-ai'); ?></option>
                    <option value="weekly"><?php _e('Weekly', 'kura-ai'); ?></option>
                    <option value="monthly"><?php _e('Monthly', 'kura-ai'); ?></option>
                </select>
            </div>
        </div>

        <!-- Scan Controls -->
        <div class="scan-controls">
            <button id="start-malware-scan" class="button button-primary">
                <i class="fas fa-search"></i> <?php _e('Start Scan', 'kura-ai'); ?>
            </button>
            <button id="cancel-malware-scan" class="button button-secondary" disabled>
                <i class="fas fa-stop"></i> <?php _e('Cancel Scan', 'kura-ai'); ?>
            </button>
        </div>

        <!-- Progress Bar -->
        <div class="scan-progress" style="display: none;">
            <div id="scan-progress-bar" class="progress-bar"></div>
            <div id="scan-progress-text" class="progress-text">
                <?php _e('Initializing scan...', 'kura-ai'); ?>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section">
            <h3><?php _e('Scan Results', 'kura-ai'); ?></h3>
            <div id="scan-results">
                <div class="no-threats">
                    <i class="fas fa-shield-alt"></i>
                    <p><?php _e('No threats detected. Run a scan to check for malware.', 'kura-ai'); ?></p>
                </div>
            </div>
        </div>
    </div>
</div>